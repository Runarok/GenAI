<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Langton's Ant - Dark Theme</title>
    <style>
        body {
            background-color: #1e1e1e;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        canvas {
            background-color: #121212;
            border: 2px solid #333;
            cursor: pointer;
        }

        h1 {
            color: #f0f0f0;
            margin-top: 20px;
        }

        #controls {
            margin-top: 20px;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            background-color: #444;
            border: 1px solid #666;
            color: white;
        }

        button:hover {
            background-color: #555;
        }

        label, input {
            font-size: 16px;
            color: white;
            margin: 5px;
        }

        input {
            background-color: #333;
            border: 1px solid #666;
            color: white;
            padding: 5px;
            width: 60px;
        }

        #infoModal {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 8px;
            width: 250px;
            color: white;
            font-size: 14px;
            display: none;
        }

        #infoModal button {
            background-color: #444;
            padding: 5px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            margin-top: 10px;
        }

        #infoModal button:hover {
            background-color: #555;
        }
    </style>
</head>
<body>

    <h1>Langton's Ant - Dark Theme</h1>
    <canvas id="gridCanvas" width="600" height="600"></canvas>

    <div id="controls">
        <button onclick="toggleSimulation()">Start/Pause</button>
        <button onclick="resetGrid()">Reset</button>
        <button onclick="toggleInfo()">Info</button>
        <button onclick="toggleInsertAnt()">Allow Inserts</button>

        <label for="speed">Speed (ms):</label>
        <input type="number" id="speed" value="5" min="1" max="100" onchange="changeSpeed()">
        
        <label for="gridSize">Grid Size:</label>
        <input type="number" id="gridSize" value="101" min="5" max="301" step="2" onchange="changeGridSize()">
    </div>

    <div id="infoModal">
        <h3>Rules of Langton's Ant</h3>
        <p><strong>Initial Setup:</strong></p>
        <ul>
            <li>The grid is a two-dimensional plane (usually considered infinite).</li>
            <li>Each cell on the grid is initially either black (off) or white (on).</li>
            <li>The ant starts at the center of the grid, facing a particular direction (typically up).</li>
        </ul>

        <p><strong>Movement Rule:</strong></p>
        <ul>
            <li>If the ant is on a white cell, it turns 90° right (clockwise), changes the cell to black, and moves forward.</li>
            <li>If the ant is on a black cell, it turns 90° left (counterclockwise), changes the cell to white, and moves forward.</li>
        </ul>

        <p><strong>Repeating the Process:</strong></p>
        <ul>
            <li>This process is repeated indefinitely. The ant's movement and the resulting pattern evolve according to these simple rules.</li>
            <li>The pattern may seem chaotic initially but eventually forms a repeating structure (a "highway").</li>
        </ul>

        <p><strong>Interesting Behavior:</strong></p>
        <ul>
            <li><em>Initially chaotic:</em> The ant moves unpredictably, creating random-looking patterns.</li>
            <li><em>Formation of a "highway":</em> Over time, the ant forms a repeating straight line (highway).</li>
        </ul>

        <p><strong>Key Characteristics:</strong></p>
        <ul>
            <li><em>Emergence of Order:</em> The system eventually stabilizes into a cyclic, predictable structure.</li>
            <li><em>Non-periodic to Periodic:</em> The system starts disordered and transitions into a periodic "highway".</li>
        </ul>

        <button onclick="toggleInfo()">Close</button>
    </div>

    <script>
        let canvas = document.getElementById('gridCanvas');
        let ctx = canvas.getContext('2d');

        let gridSize = 101;
        let cellSize = 6;
        let delay = 5;
        let isSimulationRunning = false;
        let isAllowInserts = false;

        let ants = [
            { x: Math.floor(gridSize / 2), y: Math.floor(gridSize / 2), dir: 0 } // Main ant
        ];

        let grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(0));

        function drawGrid() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let y = 0; y < gridSize; y++) {
                for (let x = 0; x < gridSize; x++) {
                    ctx.fillStyle = grid[y][x] === 0 ? '#fff' : '#444';
                    ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
                }
            }

            ants.forEach((ant) => {
                ctx.fillStyle = "#ff0000"; // Color of the ant
                ctx.fillRect(ant.x * cellSize, ant.y * cellSize, cellSize, cellSize);
            });
        }

        function updateAnt(ant) {
            let currentCell = grid[ant.y][ant.x];

            if (currentCell === 0) {
                ant.dir = (ant.dir + 1) % 4; // Turn right
                grid[ant.y][ant.x] = 1;      // Change to black
            } else {
                ant.dir = (ant.dir + 3) % 4; // Turn left
                grid[ant.y][ant.x] = 0;      // Change to white
            }

            if (ant.dir === 0) ant.y--; // Up
            else if (ant.dir === 1) ant.x++; // Right
            else if (ant.dir === 2) ant.y++; // Down
            else if (ant.dir === 3) ant.x--; // Left

            if (ant.x < 0) ant.x = gridSize - 1;
            if (ant.x >= gridSize) ant.x = 0;
            if (ant.y < 0) ant.y = gridSize - 1;
            if (ant.y >= gridSize) ant.y = 0;
        }

        function startSimulation() {
            isSimulationRunning = true;
            window.simulationInterval = setInterval(() => {
                ants.forEach(updateAnt);
                drawGrid();
            }, delay);
        }

        function pauseSimulation() {
            isSimulationRunning = false;
            clearInterval(window.simulationInterval);
        }

        function toggleSimulation() {
            if (isSimulationRunning) {
                pauseSimulation();
            } else {
                startSimulation();
            }
        }

        function resetGrid() {
            grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(0));
            ants = [{ x: Math.floor(gridSize / 2), y: Math.floor(gridSize / 2), dir: 0 }];
            clearInterval(window.simulationInterval);
            drawGrid();
        }

        function changeSpeed() {
            delay = parseInt(document.getElementById('speed').value);
            if (isSimulationRunning) {
                clearInterval(window.simulationInterval);
                startSimulation();
            }
        }

        function changeGridSize() {
            gridSize = parseInt(document.getElementById('gridSize').value);
            cellSize = 600 / gridSize;
            resetGrid();
        }

        function toggleInfo() {
            const infoModal = document.getElementById('infoModal');
            if (infoModal.style.display === "block") {
                infoModal.style.display = "none";
            } else {
                infoModal.style.display = "block";
            }
        }

        function toggleInsertAnt() {
            isAllowInserts = !isAllowInserts;
        }

        canvas.addEventListener('click', (e) => {
            if (isAllowInserts) {
                const x = Math.floor(e.offsetX / cellSize);
                const y = Math.floor(e.offsetY / cellSize);
                ants.push({ x, y, dir: 0 });
            }
        });

        drawGrid();
    </script>

</body>
</html>
