<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Langton's Ant - Dark Theme</title>
    <style>
        body {
            background-color: #1e1e1e;
            color: white;
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
        }

        canvas {
            background-color: #121212;
            border: 2px solid #333;
        }

        h1 {
            color: #f0f0f0;
            margin-top: 20px;
        }

        #controls {
            margin-top: 20px;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
            background-color: #444;
            border: 1px solid #666;
            color: white;
        }

        button:hover {
            background-color: #555;
        }

        label, input {
            font-size: 16px;
            color: white;
            margin: 5px;
        }

        input {
            background-color: #333;
            border: 1px solid #666;
            color: white;
            padding: 5px;
            width: 60px;
        }

        #infoModal {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 8px;
            width: 250px;
            color: white;
            font-size: 14px;
            display: none;
        }

        #infoModal button {
            background-color: #444;
            padding: 5px;
            border-radius: 5px;
            cursor: pointer;
            border: none;
            margin-top: 10px;
        }

        #infoModal button:hover {
            background-color: #555;
        }
    </style>
</head>
<body>

    <h1>Langton's Ant - Dark Theme</h1>
    <canvas id="gridCanvas" width="600" height="600"></canvas>

    <div id="controls">
        <button onclick="startSimulation()">Start</button>
        <button onclick="resetGrid()">Reset</button>
        <button onclick="toggleInfo()">Info</button>

        <label for="speed">Speed (ms):</label>
        <input type="number" id="speed" value="5" min="1" max="100" onchange="changeSpeed()">
        
        <label for="gridSize">Grid Size:</label>
        <input type="number" id="gridSize" value="101" min="5" max="301" step="2" onchange="changeGridSize()">
    </div>

    <div id="infoModal">
        <h3>Langton's Ant</h3>
        <p>This is a simulation of Langton's Ant. The ant moves based on simple rules:</p>
        <ul>
            <li>Turns right on white cells.</li>
            <li>Turns left on black cells.</li>
            <li>Changes cell color after visiting.</li>
        </ul>
        <button onclick="toggleInfo()">Close</button>
    </div>

    <script>
        let canvas = document.getElementById('gridCanvas');
        let ctx = canvas.getContext('2d');

        let gridSize = 101;
        let cellSize = 6;
        let delay = 5;

        let grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(0));  // 0 for white, 1 for black
        let ant = { x: Math.floor(gridSize / 2), y: Math.floor(gridSize / 2), dir: 0 };

        function drawGrid() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Clear canvas before drawing
            for (let y = 0; y < gridSize; y++) {
                for (let x = 0; x < gridSize; x++) {
                    ctx.fillStyle = grid[y][x] === 0 ? '#fff' : '#444'; // White for 0, Dark for 1
                    ctx.fillRect(x * cellSize, y * cellSize, cellSize, cellSize);
                }
            }
        }

        function updateAnt() {
            let currentCell = grid[ant.y][ant.x];
            
            if (currentCell === 0) {
                ant.dir = (ant.dir + 1) % 4; // Turn right
                grid[ant.y][ant.x] = 1;      // Change to black
            } else {
                ant.dir = (ant.dir + 3) % 4; // Turn left
                grid[ant.y][ant.x] = 0;      // Change to white
            }

            // Move the ant
            if (ant.dir === 0) ant.y--; // Up
            else if (ant.dir === 1) ant.x++; // Right
            else if (ant.dir === 2) ant.y++; // Down
            else if (ant.dir === 3) ant.x--; // Left

            // Keep the ant within the grid bounds
            if (ant.x < 0) ant.x = gridSize - 1;
            if (ant.x >= gridSize) ant.x = 0;
            if (ant.y < 0) ant.y = gridSize - 1;
            if (ant.y >= gridSize) ant.y = 0;
        }

        function startSimulation() {
            const interval = setInterval(() => {
                updateAnt();
                drawGrid();
            }, delay);

            // Store the interval to stop it later if needed
            window.simulationInterval = interval;
        }

        function resetGrid() {
            grid = Array.from({ length: gridSize }, () => Array(gridSize).fill(0));
            ant = { x: Math.floor(gridSize / 2), y: Math.floor(gridSize / 2), dir: 0 };
            clearInterval(window.simulationInterval);
            drawGrid();
        }

        function changeSpeed() {
            delay = parseInt(document.getElementById('speed').value);
            if (window.simulationInterval) {
                clearInterval(window.simulationInterval);
                startSimulation();
            }
        }

        function changeGridSize() {
            gridSize = parseInt(document.getElementById('gridSize').value);
            cellSize = 600 / gridSize;
            resetGrid();
        }

        function toggleInfo() {
            const infoModal = document.getElementById('infoModal');
            if (infoModal.style.display === "block") {
                infoModal.style.display = "none";
            } else {
                infoModal.style.display = "block";
            }
        }

        // Initial grid setup and draw
        drawGrid();
    </script>

</body>
</html>
