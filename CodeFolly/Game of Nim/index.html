<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game of Nim</title>
    <style>
        /* Dark theme */
        body {
            background-color: #2f2f2f;
            color: #e0e0e0;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        header {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .info-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
        }

        .info-button:hover {
            background-color: #45a049;
        }

        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            overflow: auto;
            padding-top: 60px;
        }

        .modal-content {
            background-color: #333;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            color: white;
            border-radius: 8px;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: white;
            text-decoration: none;
            cursor: pointer;
        }

        /* Game display */
        .game-container {
            margin-top: 100px;
            text-align: center;
        }

        h1 {
            color: #4CAF50;
        }

        .game-info {
            background-color: #444;
            padding: 20px;
            border-radius: 5px;
            max-width: 900px;
            margin: 20px auto;
            font-size: 18px;
            line-height: 1.6;
        }

        .game-info h2 {
            color: #4CAF50;
        }

        .piles {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .pile {
            background-color: #333;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            color: white;
            cursor: pointer;
            user-select: none;
        }

        .pile:hover {
            background-color: #4CAF50;
        }

        .pile span {
            display: block;
            font-size: 24px;
        }

        .pile p {
            margin: 0;
            font-size: 20px;
        }

        /* Toast notification */
        .toast {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 10px;
            border-radius: 5px;
            visibility: hidden;
            opacity: 0;
            transition: visibility 0s, opacity 0.5s linear;
        }

        .toast.show {
            visibility: visible;
            opacity: 1;
        }

    </style>
</head>
<body>

    <!-- Info Button -->
    <header>
        <button class="info-button" id="infoBtn">Game Info</button>
    </header>

    <!-- Modal for Info -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2>Game of Nim - Info</h2>
            <div class="game-info">
                <p><strong>The Game of Nim</strong> is a classic mathematical strategy game, often used to teach concepts of combinatorial game theory. It involves two players, and the game typically proceeds as follows:</p>
                
                <h3>Setup:</h3>
                <p>There are several piles (or stacks) of objects (like stones, matchsticks, or coins). The number of piles can vary, but each pile contains a positive number of objects.</p>
                
                <h3>Gameplay:</h3>
                <p>On each player's turn, they must choose one pile and remove any number of objects (at least one) from that pile. Players take turns until no objects are left in any pile.</p>
                
                <h3>Winning Condition:</h3>
                <p>The player who removes the last object from the last pile wins the game.</p>
                
                <h3>Strategy:</h3>
                <p>The Game of Nim is known for its mathematical strategy involving binary numbers (also known as the "Nim-sum"). To determine whether you are in a winning or losing position, you perform the following steps:</p>
                
                <ol>
                    <li>Write the number of objects in each pile in binary form.</li>
                    <li>Compute the Nim-sum, which is the result of taking the binary XOR (exclusive OR) of all the pile sizes.</li>
                    <li>If the Nim-sum equals 0, the position is losing for the player about to move (assuming optimal play from the opponent).</li>
                    <li>If the Nim-sum is non-zero, the position is winning for the player about to move.</li>
                </ol>
                
                <h3>Example:</h3>
                <p>Suppose there are 3 piles with the following number of objects:</p>
                <ul>
                    <li>Pile 1: 3 objects</li>
                    <li>Pile 2: 4 objects</li>
                    <li>Pile 3: 5 objects</li>
                </ul>
                <p>Convert the numbers to binary:</p>
                <pre>3 (binary 0011)</pre>
                <pre>4 (binary 0100)</pre>
                <pre>5 (binary 0101)</pre>
                <p>Now, XOR them:</p>
                <pre>0011</pre>
                <pre>0100</pre>
                <pre>0101</pre>
                <pre>0010 (which is 2 in decimal)</pre>
                <p>Since the Nim-sum is non-zero (2), the position is winning for the current player.</p>
            </div>
        </div>
    </div>

    <!-- Game Content -->
    <div class="game-container">
        <h1>Welcome to the Game of Nim</h1>

        <div class="game-info">
            <p>In this game, two players will take turns removing objects from piles. The goal is to be the player who removes the last object!</p>
            <p>Click the button above to learn more about the rules and strategy behind the game.</p>
        </div>

        <!-- Piles Display -->
        <div id="piles" class="piles"></div>

        <!-- Status Display -->
        <div class="status" id="status">Your turn! Click a pile to remove objects.</div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast"></div>

    <!-- Modal for input (to enter the number of objects to remove) -->
    <div id="inputModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeInputModal">&times;</span>
            <h2>How many objects to remove?</h2>
            <input type="number" id="inputAmount" min="1" style="width: 50px; padding: 10px; font-size: 16px;" />
            <button id="submitAmount" class="info-button" style="margin-left: 10px;">Submit</button>
        </div>
    </div>

    <!-- JavaScript for Modal functionality and Game -->
    <script>
        // Get the modal and button elements
        var infoModal = document.getElementById("infoModal");
        var inputModal = document.getElementById("inputModal");
        var btn = document.getElementById("infoBtn");
        var closeModal = document.getElementById("closeModal");
        var closeInputModal = document.getElementById("closeInputModal");
        var toast = document.getElementById("toast");

        // Game Variables
        let piles = [3, 5, 7]; // Starting configuration of the piles
        let currentPlayer = "Player 1"; // Player 1 starts
        let currentPileIndex = -1;

        // Function to display piles
        function displayPiles() {
            const pilesContainer = document.getElementById("piles");
            pilesContainer.innerHTML = ""; // Clear previous display
            piles.forEach((pile, index) => {
                let pileDiv = document.createElement("div");
                pileDiv.classList.add("pile");
                pileDiv.innerHTML = `<span>${pile}</span><p>Pile ${index + 1}</p>`;
                pileDiv.onclick = () => selectPile(index);
                pilesContainer.appendChild(pileDiv);
            });
        }

        // Function to update the game status
        function updateStatus(message) {
            const statusDiv = document.getElementById("status");
            statusDiv.textContent = message;
        }

        // Function to show toast
        function showToast(message) {
            toast.textContent = message;
            toast.classList.add("show");
            setTimeout(() => toast.classList.remove("show"), 3000);
        }

        // Handle the player's turn
        function selectPile(pileIndex) {
            if (piles[pileIndex] === 0) return; // Can't take from an empty pile
            currentPileIndex = pileIndex;
            openInputModal();
        }

        // Open the input modal to prompt the player
        function openInputModal() {
            inputModal.style.display = "block";
        }

        // Close the input modal
        closeInputModal.onclick = function() {
            inputModal.style.display = "none";
        }

        // Handle the amount input when the player submits the number of objects
        document.getElementById("submitAmount").onclick = function() {
            let removeAmount = parseInt(document.getElementById("inputAmount").value);
            if (isNaN(removeAmount) || removeAmount <= 0 || removeAmount > piles[currentPileIndex]) {
                alert("Invalid move. Try again.");
                return;
            }

            // Update the pile
            piles[currentPileIndex] -= removeAmount;
            displayPiles();

            // Check if the game is over
            if (isGameOver()) {
                updateStatus(`${currentPlayer} wins!`);
                showToast(`${currentPlayer} wins!`);
                setTimeout(() => {
                    alert(`${currentPlayer} wins! Game Over!`);
                    resetGame();
                }, 10);
                return;
            }

            // Switch player
            currentPlayer = currentPlayer === "Player 1" ? "Player 2" : "Player 1";
            updateStatus(`${currentPlayer}'s turn!`);

            inputModal.style.display = "none"; // Close the modal
        }

        // Check if the game is over
        function isGameOver() {
            return piles.every(pile => pile === 0);
        }

        // Reset game
        function resetGame() {
            piles = [3, 5, 7];
            currentPlayer = "Player 1";
            displayPiles();
            updateStatus("Your turn! Click a pile to remove objects.");
        }

        // Open the modal when the button is clicked
        btn.onclick = function() {
            infoModal.style.display = "block";
        }

        // Close the modal when the close button is clicked
        closeModal.onclick = function() {
            infoModal.style.display = "none";
        }

        // Close the modal if the user clicks anywhere outside of it
        window.onclick = function(event) {
            if (event.target == infoModal) {
                infoModal.style.display = "none";
            }
            if (event.target == inputModal) {
                inputModal.style.display = "none";
            }
        }

        // Start the game
        displayPiles();
        updateStatus("Your turn! Click a pile to remove objects.");
    </script>
</body>
</html>
