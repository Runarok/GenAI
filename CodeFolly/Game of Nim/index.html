<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game of Nim</title>
    <style>
        /* Dark theme */
        body {
            background-color: #2f2f2f;
            color: #e0e0e0;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        header {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }

        .info-button {
            background-color: #4CAF50;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            border-radius: 5px;
        }

        .info-button:hover {
            background-color: #45a049;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            overflow: auto;
            padding-top: 60px;
        }

        .modal-content {
            background-color: #333;
            margin: 5% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            color: white;
            border-radius: 8px;
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close:hover,
        .close:focus {
            color: white;
            text-decoration: none;
            cursor: pointer;
        }

        .game-container {
            margin-top: 100px;
            text-align: center;
        }

        h1 {
            color: #4CAF50;
        }

        .game-info {
            background-color: #444;
            padding: 20px;
            border-radius: 5px;
            max-width: 600px;
            margin: 20px auto;
        }

        .game-info p {
            font-size: 18px;
        }

        /* Game display */
        .piles {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
        }

        .pile {
            background-color: #333;
            padding: 20px;
            border-radius: 5px;
            text-align: center;
            color: white;
            cursor: pointer;
            user-select: none;
        }

        .pile:hover {
            background-color: #4CAF50;
        }

        .pile span {
            display: block;
            font-size: 24px;
        }

        .pile p {
            margin: 0;
            font-size: 20px;
        }

        .status {
            margin-top: 30px;
            font-size: 20px;
            color: #f44336;
        }
    </style>
</head>
<body>

    <!-- Info Button -->
    <header>
        <button class="info-button" id="infoBtn">Game Info</button>
    </header>

    <!-- Modal -->
    <div id="infoModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModal">&times;</span>
            <h2>Game of Nim - Info</h2>
            <p>The Game of Nim is a mathematical game of strategy in which two players take turns removing objects from heaps or piles. Each player may remove any number of objects, but only from one pile per turn. The player who removes the last object wins the game.</p>
            <p>The game's strategy revolves around binary numbers and the concept of Nim-sum (XOR). A player is in a losing position if the Nim-sum of the piles is 0 at the start of their turn. If the Nim-sum is non-zero, the player can force a win with optimal play.</p>
        </div>
    </div>

    <!-- Game Content -->
    <div class="game-container">
        <h1>Welcome to the Game of Nim</h1>

        <div class="game-info">
            <p>In this game, two players will take turns removing objects from piles. The goal is to be the player who removes the last object!</p>
            <p>Click the button above to learn more about the rules and strategy behind the game.</p>
        </div>

        <!-- Piles Display -->
        <div id="piles" class="piles"></div>

        <!-- Status Display -->
        <div class="status" id="status">Your turn! Click a pile to remove objects.</div>
    </div>

    <!-- JavaScript for Modal functionality and Game -->
    <script>
        // Get the modal and button elements
        var modal = document.getElementById("infoModal");
        var btn = document.getElementById("infoBtn");
        var span = document.getElementById("closeModal");

        // Open the modal when the button is clicked
        btn.onclick = function() {
            modal.style.display = "block";
        }

        // Close the modal when the close button is clicked
        span.onclick = function() {
            modal.style.display = "none";
        }

        // Close the modal if the user clicks anywhere outside of it
        window.onclick = function(event) {
            if (event.target == modal) {
                modal.style.display = "none";
            }
        }

        // Game Variables
        let piles = [3, 5, 7]; // Starting configuration of the piles
        let currentPlayer = "Player 1"; // Player 1 starts

        // Function to display piles
        function displayPiles() {
            const pilesContainer = document.getElementById("piles");
            pilesContainer.innerHTML = ""; // Clear previous display
            piles.forEach((pile, index) => {
                let pileDiv = document.createElement("div");
                pileDiv.classList.add("pile");
                pileDiv.innerHTML = `<span>${pile}</span><p>Pile ${index + 1}</p>`;
                pileDiv.onclick = () => takeTurn(index);
                pilesContainer.appendChild(pileDiv);
            });
        }

        // Function to update the game status
        function updateStatus(message) {
            const statusDiv = document.getElementById("status");
            statusDiv.textContent = message;
        }

        // Handle the player's turn
        function takeTurn(pileIndex) {
            if (piles[pileIndex] === 0) return; // Can't take from an empty pile

            // Ask the player how many objects to remove
            let removeAmount = prompt(`How many objects would you like to remove from Pile ${pileIndex + 1}?`);
            removeAmount = parseInt(removeAmount);

            // Validate input
            if (isNaN(removeAmount) || removeAmount <= 0 || removeAmount > piles[pileIndex]) {
                alert("Invalid move. Try again.");
                return;
            }

            // Update the pile
            piles[pileIndex] -= removeAmount;
            displayPiles();

            // Check if the game is over
            if (isGameOver()) {
                updateStatus(`${currentPlayer} wins!`);
                setTimeout(() => alert(`${currentPlayer} wins! Game Over!`), 10);
                return;
            }

            // Switch player
            currentPlayer = currentPlayer === "Player 1" ? "Player 2" : "Player 1";
            updateStatus(`${currentPlayer}'s turn!`);
        }

        // Check if the game is over
        function isGameOver() {
            return piles.every(pile => pile === 0);
        }

        // Start the game
        displayPiles();
        updateStatus("Your turn! Click a pile to remove objects.");
    </script>
</body>
</html>
